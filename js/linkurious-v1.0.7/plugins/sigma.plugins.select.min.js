(function(a){"use strict";function b(a,b){var c=a?a.length:0;if(!c)return[];var d=-1,e=[],f=b.length;a:for(;++d<c;){var g=a[d];if(g===g){for(var h=f;h--;)if(b[h]===g)continue a;e.push(g)}else b.indexOf(g)<0&&e.push(g)}return e}function c(a){i=32===a.which,g.removeEventListener("keydown",c,!1),g.addEventListener("keyup",d,!1)}function d(a){i=!1,g.addEventListener("keydown",c,!1),g.removeEventListener("keyup",d,!1)}function e(a,d){function e(){d.dropEdges(),d.nodes().length===a.graph.nodes().length?d.dropNodes():d.addNodes(),a.refresh({skipIndexation:!0})}function f(){d.nodes().length&&null===h&&(h=d.nodes()[0].id)}function j(){a.renderers[0].container.lastChild.addEventListener("mousemove",f)}function k(){d.dropEdges(),d.dropNodes(),a.refresh({skipIndexation:!0})}function l(){a.graph.dropNodes(d.nodes().map(function(a){return a.id})),a.graph.dropEdges(d.edges().map(function(a){return a.id})),a.refresh()}function m(){d.addNeighbors(),a.refresh({skipIndexation:!0})}function n(){d.dropEdges(),d.setNodesBy(function(b){return 0===a.graph.degree(b.id)}),a.refresh({skipIndexation:!0})}function o(){d.dropEdges(),d.setNodesBy(function(b){return 1===a.graph.adjacentNodes(b.id).length}),a.refresh({skipIndexation:!0})}var p=!1,q=null,r=null;g=g||document.getElementsByTagName("body")[0],sigma.plugins.dragNodes&&a.renderers[0].container.lastChild.addEventListener("mousedown",j),this.clickNodesHandler=function(c){if(!p){var e=c.data.node.map(function(a){return a.id}),f=d.nodes().map(function(a){return a.id}),g=b(e,f);if(d.dropEdges(),i){var j=b(e,g);d.dropNodes(j)}else p||(d.dropNodes(),h=null),f.length>1&&d.addNodes(e),d.nodes().length&&sigma.plugins.dragNodes&&(h===d.nodes()[0].id?(d.dropNodes(),h=null):h=d.nodes()[0].id);d.addNodes(g),a.refresh({skipIndexation:!0})}},this.clickEdgesHandler=function(c){if(!p){var e=c.data.edge.map(function(a){return a.id}),f=d.edges().map(function(a){return a.id}),g=b(e,f);if(d.dropNodes(),i){var h=b(e,g);d.dropEdges(h)}else d.dropEdges(),f.length>1&&d.addEdges(e);d.addEdges(g),a.refresh({skipIndexation:!0})}},this.dragHandler=function(){p=!0},this.dropHandler=function(){setTimeout(function(){p=!1},300)},a.bind("clickNodes",this.clickNodesHandler),a.bind("clickEdges",this.clickEdgesHandler),this.bindDragNodes=function(a){q=a,q.bind("drag",this.dragHandler),q.bind("drop",this.dropHandler)},this.unbindDragNodes=function(){q&&(q.unbind("drag",this.dragHandler),q.unbind("drop",this.dropHandler),p=!1,q=null)},g.addEventListener("keydown",c,!1),this.bindKeyboard=function(a){r=a,r.bind("32+65 18+32+65",e),r.bind("32+85 18+32+85",k),r.bind("32+46 18+32+46",l),r.bind("32+69 18+32+69",m),r.bind("32+73 18+32+73",n),r.bind("32+76 18+32+76",o)},this.unbindKeyboard=function(){r&&(r.unbind("32+65 18+32+65",e),r.unbind("32+85 18+32+85",k),r.unbind("32+46 18+32+46",l),r.unbind("32+69 18+32+69",m),r.unbind("32+73 18+32+73",n),r.unbind("32+76 18+32+76",o),r=null)}}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var f={},g=null,h=null,i=!1;sigma.plugins.select=function(a,b){return f[a.id]||(f[a.id]=new e(a,b),a.bind("kill",function(){sigma.plugins.killSelect(a)})),f[a.id]},sigma.plugins.killSelect=function(a){f[a.id]instanceof e&&(a.unbind("clickNodes",f[a.id].clickNodesHandler),a.unbind("clickEdges",f[a.id].clickEdgesHandler),f[a.id].unbindKeyboard(),f[a.id].unbindDragNodes(),delete f[a.id]),!f.length&&g&&(g.removeEventListener("keydown",c,!1),g.removeEventListener("keyup",d,!1),g=null)}}).call(this);
//# sourceMappingURL=sigma.plugins.select.min.js.map